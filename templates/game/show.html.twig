{% extends 'base.html.twig' %}

{% block title %}{{ jeu.titre }}{% endblock %}

{% block body %}
<div class="dashboard-wrap">
  <div class="cyber-card" style="max-width:700px; margin:auto;">
    <h2 style="color:var(--neon-purple); text-align:center; margin-bottom:12px;">
      Détails du jeu : {{ jeu.titre }}
    </h2>

    <div class="cyber-info" style="color:var(--text-color); line-height:1.6;">
      <p><strong>Description :</strong> {{ jeu.description }}</p>
      <p><strong>Ville :</strong> {{ jeu.ville }}</p>
      <p><strong>Latitude :</strong> {{ jeu.latitude }}</p>
      <p><strong>Longitude :</strong> {{ jeu.longitude }}</p>
      <p><strong>Date de la soirée :</strong> {{ jeu.dateSoiree ? jeu.dateSoiree|date('d/m/Y H:i') : 'Non précisée' }}</p>
      <p><strong>Nombre de places :</strong> {{ jeu.nombrePlaces }}</p>
      {% if jeu.user %}
        <p><strong>Créé par :</strong> {{ jeu.user.username }}</p>
      {% endif %}
    </div>

    <div style="text-align:center; margin-top:20px;">
      {% if is_granted('ROLE_ADMIN') or app.user == jeu.user %}
        <a href="{{ path('app_game_edit', {'id': jeu.id}) }}" class="btn-cyberpunk">Modifier</a>
      {% endif %}

      {% if is_granted('ROLE_ADMIN') %}
        <a href="{{ path('app_game_index') }}" class="btn-cyberpunk" style="background-color: var(--neon-blue);">Retour</a>
      {% else %}
        <a href="{{ path('user_dashboard') }}" class="btn-cyberpunk" style="background-color: var(--neon-blue);">Retour</a>
      {% endif %}
    </div>

    {% if is_granted('ROLE_ADMIN') or app.user == jeu.user %}
      <form method="post" action="{{ path('app_game_delete', {'id': jeu.id}) }}" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer ce jeu ?');" style="text-align:center; margin-top:10px;">
        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ jeu.id) }}">
        <button class="btn-cyberpunk" style="background-color: var(--neon-pink);">Supprimer</button>
      </form>
    {% endif %}
  </div>
</div>
{% endblock %}
